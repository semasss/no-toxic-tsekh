---
// Компонент переключателя пола
---

<div class="flex gap-4">
  <button
    type="button"
    class="gender-btn h-16 w-16 rounded-full bg-white border-0 hover:bg-gray-100 transition-colors flex items-center justify-center"
    data-gender="male"
  >
    <img src="/icons/male.svg" alt="Мужской" class="w-8 h-8" />
  </button>

  <button
    type="button"
    class="gender-btn h-16 w-16 rounded-full bg-white border-0 hover:bg-gray-100 transition-colors flex items-center justify-center"
    data-gender="female"
  >
    <img src="/icons/female.svg" alt="Женский" class="w-8 h-8" />
  </button>
</div>

<style>
  .gender-btn.active {
    background-color: #77FF00;
    border: 2px solid black;
  }
</style>

<script>
  // Функция проверки валидности формы
  function checkFormValidity() {
    const nameInput = document.getElementById('name');
    const goButton = document.getElementById('go');

    if (nameInput && goButton) {
      const namePattern = /^[A-Za-zА-Яа-яЁё]{1,20}$/;
      const isNameValid = nameInput.value.trim().length > 0 && namePattern.test(nameInput.value);
      const isGenderSelected = window.selectedGender !== '';

      goButton.disabled = !(isNameValid && isGenderSelected);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.gender-btn');
    window.selectedGender = '';

    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        // Убираем active класс у всех кнопок
        buttons.forEach((btn) => btn.classList.remove('active'));
        // Добавляем active класс к нажатой кнопке
        button.classList.add('active');

        window.selectedGender = button.dataset.gender;

        // Проверяем валидность формы
        checkFormValidity();
      });
    });

    // Добавляем проверку при вводе имени
    const nameInput = document.getElementById('name');
    if (nameInput) {
      nameInput.addEventListener('input', checkFormValidity);
    }

    // Экспортируем функцию для использования в других скриптах
    window.getSelectedGender = () => window.selectedGender;
  });
</script>
